{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DESTOCK/Desktop/semana%20C%20-%20proyecto%20MVC%20BOA/BOA-CATEC/lib/db.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\r\n\r\nconst prismaClientSingleton = () => {\r\n    return new PrismaClient()\r\n}\r\n\r\ntype PrismaClientSingleton = ReturnType<typeof prismaClientSingleton>\r\n\r\nconst globalForPrisma = globalThis as unknown as {\r\n    prisma: PrismaClientSingleton | undefined\r\n}\r\n\r\nconst db = globalForPrisma.prisma ?? prismaClientSingleton()\r\n\r\nexport default db\r\n\r\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = db\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,wBAAwB;IAC1B,OAAO,IAAI,6IAAY;AAC3B;AAIA,MAAM,kBAAkB;AAIxB,MAAM,KAAK,gBAAgB,MAAM,IAAI;uCAEtB;AAEf,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DESTOCK/Desktop/semana%20C%20-%20proyecto%20MVC%20BOA/BOA-CATEC/lib/auth.ts"],"sourcesContent":["import NextAuth from 'next-auth';\r\nimport Credentials from 'next-auth/providers/credentials';\r\nimport { z } from 'zod';\r\nimport db from '@/lib/db';\r\n// import bcrypt from 'bcrypt'; // En un entorno real, usaríamos bcrypt\r\n\r\n// Simulación de hash para este demo\r\nconst saltAndHashPassword = (password: string) => {\r\n    return password; // NO HACER ESTO EN PRODUCCIÓN\r\n};\r\n\r\nexport const { handlers, auth, signIn, signOut } = NextAuth({\r\n    providers: [\r\n        Credentials({\r\n            credentials: {\r\n                email: { label: \"Email\", type: \"email\" },\r\n                password: { label: \"Password\", type: \"password\" },\r\n            },\r\n            authorize: async (credentials) => {\r\n                try {\r\n                    const parsedCredentials = z\r\n                        .object({ email: z.string().email(), password: z.string().min(6) })\r\n                        .safeParse(credentials);\r\n\r\n                    if (parsedCredentials.success) {\r\n                        const { email, password } = parsedCredentials.data;\r\n                        const user = await db.user.findUnique({ where: { email } });\r\n\r\n                        if (!user) return null;\r\n\r\n                        // En producción: const passwordsMatch = await bcrypt.compare(password, user.password);\r\n                        const passwordsMatch = password === user.password;\r\n\r\n                        if (passwordsMatch) return user;\r\n                    }\r\n\r\n                    console.log('Invalid credentials');\r\n                    return null;\r\n                } catch (error) {\r\n                    console.error('Auth Error:', error);\r\n                    return null;\r\n                }\r\n            },\r\n        }),\r\n    ],\r\n    pages: {\r\n        signIn: '/login',\r\n    },\r\n    secret: process.env.AUTH_SECRET,\r\n    callbacks: {\r\n        async session({ session, token }) {\r\n            if (token.sub && session.user) {\r\n                session.user.id = token.sub;\r\n            }\r\n            return session;\r\n        },\r\n        async jwt({ token }) {\r\n            return token;\r\n        }\r\n    }\r\n});\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AAAA;AACA;AACA;;;;;AACA,uEAAuE;AAEvE,oCAAoC;AACpC,MAAM,sBAAsB,CAAC;IACzB,OAAO,UAAU,8BAA8B;AACnD;AAEO,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,kKAAQ,EAAC;IACxD,WAAW;QACP,IAAA,uKAAW,EAAC;YACR,aAAa;gBACT,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YACpD;YACA,WAAW,OAAO;gBACd,IAAI;oBACA,MAAM,oBAAoB,yKAAC,CACtB,MAAM,CAAC;wBAAE,OAAO,yKAAC,CAAC,MAAM,GAAG,KAAK;wBAAI,UAAU,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC;oBAAG,GAChE,SAAS,CAAC;oBAEf,IAAI,kBAAkB,OAAO,EAAE;wBAC3B,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,kBAAkB,IAAI;wBAClD,MAAM,OAAO,MAAM,sHAAE,CAAC,IAAI,CAAC,UAAU,CAAC;4BAAE,OAAO;gCAAE;4BAAM;wBAAE;wBAEzD,IAAI,CAAC,MAAM,OAAO;wBAElB,uFAAuF;wBACvF,MAAM,iBAAiB,aAAa,KAAK,QAAQ;wBAEjD,IAAI,gBAAgB,OAAO;oBAC/B;oBAEA,QAAQ,GAAG,CAAC;oBACZ,OAAO;gBACX,EAAE,OAAO,OAAO;oBACZ,QAAQ,KAAK,CAAC,eAAe;oBAC7B,OAAO;gBACX;YACJ;QACJ;KACH;IACD,OAAO;QACH,QAAQ;IACZ;IACA,QAAQ,QAAQ,GAAG,CAAC,WAAW;IAC/B,WAAW;QACP,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC5B,IAAI,MAAM,GAAG,IAAI,QAAQ,IAAI,EAAE;gBAC3B,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,GAAG;YAC/B;YACA,OAAO;QACX;QACA,MAAM,KAAI,EAAE,KAAK,EAAE;YACf,OAAO;QACX;IACJ;AACJ"}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DESTOCK/Desktop/semana%20C%20-%20proyecto%20MVC%20BOA/BOA-CATEC/app/api/auth/%5B...nextauth%5D/route.ts"],"sourcesContent":["import { handlers } from \"@/lib/auth\"\r\nexport const { GET, POST } = handlers\r\n"],"names":[],"mappings":";;;;;;AAAA;;AACO,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,yHAAQ"}}]
}