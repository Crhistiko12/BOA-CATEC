{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DESTOCK/Desktop/semana%20C%20-%20proyecto%20MVC%20BOA/BOA-CATEC/lib/db.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\r\n\r\nconst prismaClientSingleton = () => {\r\n    return new PrismaClient()\r\n}\r\n\r\ntype PrismaClientSingleton = ReturnType<typeof prismaClientSingleton>\r\n\r\nconst globalForPrisma = globalThis as unknown as {\r\n    prisma: PrismaClientSingleton | undefined\r\n}\r\n\r\nconst db = globalForPrisma.prisma ?? prismaClientSingleton()\r\n\r\nexport default db\r\n\r\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = db\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,wBAAwB;IAC1B,OAAO,IAAI,6IAAY;AAC3B;AAIA,MAAM,kBAAkB;AAIxB,MAAM,KAAK,gBAAgB,MAAM,IAAI;uCAEtB;AAEf,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DESTOCK/Desktop/semana%20C%20-%20proyecto%20MVC%20BOA/BOA-CATEC/app/api/auth/register/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\r\nimport db from '@/lib/db'\r\nimport { z } from 'zod'\r\n\r\nconst registerSchema = z.object({\r\n    name: z.string().min(2),\r\n    email: z.string().email(),\r\n    password: z.string().min(6),\r\n})\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const body = await request.json()\r\n        const { name, email, password } = registerSchema.parse(body)\r\n\r\n        // Verificar si el usuario ya existe\r\n        const existingUser = await db.user.findUnique({\r\n            where: { email }\r\n        })\r\n\r\n        if (existingUser) {\r\n            return NextResponse.json(\r\n                { error: 'El correo electrónico ya está registrado' },\r\n                { status: 400 }\r\n            )\r\n        }\r\n\r\n        // Crear usuario\r\n        // NOTA: En producción, la contraseña debe ser hasheada con bcrypt\r\n        const user = await db.user.create({\r\n            data: {\r\n                name,\r\n                email,\r\n                password, // Guardando en texto plano por simplicidad en este entorno demo\r\n                role: 'USER'\r\n            }\r\n        })\r\n\r\n        // Eliminar password de la respuesta\r\n        const { password: _, ...userWithoutPassword } = user\r\n\r\n        return NextResponse.json(userWithoutPassword, { status: 201 })\r\n    } catch (error) {\r\n        if (error instanceof z.ZodError) {\r\n            return NextResponse.json({ error: 'Datos inválidos' }, { status: 400 })\r\n        }\r\n        console.error('Registration error:', error)\r\n        return NextResponse.json(\r\n            { error: 'Error interno del servidor' },\r\n            { status: 500 }\r\n        )\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM,iBAAiB,yKAAC,CAAC,MAAM,CAAC;IAC5B,MAAM,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IACrB,OAAO,yKAAC,CAAC,MAAM,GAAG,KAAK;IACvB,UAAU,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC;AAC7B;AAEO,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,eAAe,KAAK,CAAC;QAEvD,oCAAoC;QACpC,MAAM,eAAe,MAAM,sHAAE,CAAC,IAAI,CAAC,UAAU,CAAC;YAC1C,OAAO;gBAAE;YAAM;QACnB;QAEA,IAAI,cAAc;YACd,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAA2C,GACpD;gBAAE,QAAQ;YAAI;QAEtB;QAEA,gBAAgB;QAChB,kEAAkE;QAClE,MAAM,OAAO,MAAM,sHAAE,CAAC,IAAI,CAAC,MAAM,CAAC;YAC9B,MAAM;gBACF;gBACA;gBACA;gBACA,MAAM;YACV;QACJ;QAEA,oCAAoC;QACpC,MAAM,EAAE,UAAU,CAAC,EAAE,GAAG,qBAAqB,GAAG;QAEhD,OAAO,gJAAY,CAAC,IAAI,CAAC,qBAAqB;YAAE,QAAQ;QAAI;IAChE,EAAE,OAAO,OAAO;QACZ,IAAI,iBAAiB,yKAAC,CAAC,QAAQ,EAAE;YAC7B,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAkB,GAAG;gBAAE,QAAQ;YAAI;QACzE;QACA,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAA6B,GACtC;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}